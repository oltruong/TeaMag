<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="WEB-INF/layouts/template.xhtml">

    <ui:define name="title">#{i18n.businesscasePagetitle}</ui:define>


    <ui:define name="content">

        <p:tabView orientation="top" activeIndex="#{bcController.tabIndex}">
            <p:tab title="#{i18n.businesscasePagebusinesscases}">

                <h:form id="idForm">
                    <p:panel header="#{i18n.businesscasePagebcList}">

                        <p:dataTable value="#{bcController.bcList}" var="bc" border="1" editable="true">

                            <p:ajax event="rowEdit" listener="#{bcController.onEditBC}" update=":growl"/>
                            <p:ajax event="rowEditCancel" listener="#{bcController.onCancelBC}" update=":growl"/>

                            <p:column headerText="#{i18n.number}" sortBy="#{bc.identifier}">
                                <h:outputText value="#{bc.identifier}"/>
                            </p:column>

                            <p:column headerText="#{i18n.name}" sortBy="#{bc.name}">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{bc.name}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputText value="#{bc.name}"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column headerText="#{i18n.businesscasePageamount}" sortBy="#{bc.amount}">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{bc.amount}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputText value="#{bc.amount}"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column headerText="#{i18n.comment}">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{bc.comment}"/>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputText value="#{bc.comment}"/>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>

                            <p:column style="width:6%">
                                <p:rowEditor/>
                            </p:column>

                            <p:columnGroup type="footer">
                                <p:row>
                                    <p:column colspan="2" style="text-align:right" footerText="Total:">

                                    </p:column>

                                    <p:column footerText="#{bcController.total}">
                                    </p:column>

                                </p:row>
                            </p:columnGroup>

                        </p:dataTable>

                    </p:panel>
                </h:form>
                <br/>
                <p:panel header="#{i18n.businesscasePagenewBC}">

                    <hr/>
                    <h:form>
                        <table border="0">
                            <tr>
                                <td><h:outputLabel value="#{i18n.number}"/></td>
                                <td><h:inputText value="#{bcController.bc.identifier}"/></td>
                                <td><h:outputLabel value="#{i18n.name}"/></td>
                                <td><h:inputText value="#{bcController.bc.name}"/></td>
                                <td><h:outputLabel value="#{i18n.businesscasePageamount}"/></td>
                                <td><h:inputText value="#{bcController.bc.amount}"/></td>
                                <td><p:commandButton value="#{i18n.add}"
                                                     action="#{bcController.doCreateBC}" ajax="false"/></td>
                            </tr>
                        </table>

                    </h:form>
                </p:panel>

            </p:tab>
            <p:tab title="#{i18n.businesscasePageactivities}">


                <p:panel header="#{i18n.businesscasePagenewActivity}">

                    <hr/>
                    <h:form>
                        <table border="0">
                            <tr>
                                <td><h:outputLabel value="#{i18n.name}"/></td>
                                <td><h:inputText value="#{bcController.activity.name}"/></td>
                                <td><h:outputLabel value="#{i18n.businesscasePageBC}"/></td>
                                <td>
                                    <p:selectOneMenu id="basic"
                                                     value="#{bcController.activity.bc.identifier}">
                                        <f:selectItem itemLabel="Select One" itemValue=""/>
                                        <f:selectItems value="#{bcController.bcList}" var="bc"
                                                       itemLabel="#{bc.identifier}-#{bc.name}"
                                                       itemValue="#{bc.identifier}"/>
                                    </p:selectOneMenu></td>
                                <td><p:commandButton value="#{i18n.add}"
                                                     action="#{bcController.doCreateActivity}" ajax="false"/></td>
                            </tr>
                        </table>

                    </h:form>
                </p:panel>
                <br/>
                <br/>
                <p:panel header="#{i18n.businesscasePageactivities}">
                    <p:dataTable value="#{bcController.activityList}" var="activity"
                                 border="1">
                        <p:column headerText="#{i18n.name}" sortBy="#{activity.name}">
                            <h:outputText value="#{activity.name}"/>
                        </p:column>

                        <p:column headerText="#{i18n.businesscasePagebcNumber}" sortBy="#{activity.bc.identifier}">
                            <h:outputText value="#{activity.bc.identifier}">
                                <f:convertNumber pattern="####"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="#{i18n.businesscasePagebcName}" sortBy="#{activity.bc.name}">
                            <h:outputText value="#{activity.bc.name}"/>
                        </p:column>


                    </p:dataTable>
                </p:panel>

            </p:tab>
        </p:tabView>
    </ui:define>
</ui:composition>